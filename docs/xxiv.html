<!DOCTYPE html>

<!--
xxiv
-->

<!--
https://jbachnp.github.io/AhNull/xxiv.html
-->

<html>
<head>
    <title>xxiv</title>
    <link rel="icon" href="favicon.ico">

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


</head>

<body>
    <!--style-->
    <style type="text/css">
    </style>

    <!--UI-->
    <h1>xxivðŸŸ </h1>
    <div>
        <input type="text" id="txtSearch" placeholder="Type your search here..." onkeyup="handleKeyUp(event)">
        <button onclick="showAlert()">Search</button>
    </div>
	
    <!--templates -->
    <div id="tpls">
        <script type="text/template" name="tplPassage">
        </script>
    </div>

    <!--app logic uiVolume-->
    <script>
        function showAlert() {
            // Get the value from the text box
            var inputText = document.getElementById("txtSearch").value;
            // Show an alert with the input value
            //alert(inputText);
            openpage(`https://dictionary.cambridge.org/dictionary/english-chinese-traditional/${inputText}`, 'cambridge',  'console.log("this injected")');
        }

        // Function to handle keyup event for Enter key
        function handleKeyUp(event) {
            if (event.key === 'Enter') {
                showAlert();
            }
        }
	    
        function openpage(targetName, url, jsInject) {
            const newTab = window.open(url, targetName);

            // Wait for the new tab to load
            newTab.onload = function() {
                // Create a script element
                const script = newTab.document.createElement('script');
                
                // Set the script content
                script.textContent = `
                    document.addEventListener('DOMContentLoaded', function() {
                        console.log('The page has fully loaded!');
                        ${jsInject}
                    });
                `;
                
                // Append the script to the new tab's document
                newTab.document.body.appendChild(script);
            };
        }
	    
    </script>

</body>
</html>
